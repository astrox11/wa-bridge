---
interface Props {
  title?: string;
  showSearch?: boolean;
  showThemeToggle?: boolean;
}

const { title = 'wa-runtime', showSearch = false, showThemeToggle = true } = Astro.props;
---

<header class="sticky top-0 z-50 bg-surface-container dark:bg-surface-dark-container shadow-elevation-2">
  <div class="flex items-center justify-between h-16 px-4 md:px-6">
    <div class="flex items-center gap-4">
      <a href="/" class="flex items-center gap-3 text-surface-on-surface dark:text-surface-dark-on-surface">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-primary dark:text-primary-dark">
          <path d="M12 2C6.48 2 2 6.48 2 12C2 13.85 2.5 15.55 3.36 17L2 22L7.13 20.68C8.53 21.51 10.2 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM16.46 15.46C16.23 16.08 15.17 16.64 14.45 16.77C13.86 16.87 13.11 16.94 10.43 15.83C7.07 14.42 4.93 11.01 4.78 10.81C4.63 10.61 3.53 9.15 3.53 7.64C3.53 6.13 4.28 5.4 4.58 5.08C4.88 4.76 5.23 4.68 5.45 4.68C5.67 4.68 5.88 4.68 6.08 4.69C6.3 4.7 6.58 4.6 6.85 5.18C7.13 5.78 7.8 7.29 7.87 7.44C7.94 7.59 8 7.78 7.9 7.98C7.8 8.18 7.73 8.3 7.58 8.48C7.43 8.66 7.26 8.88 7.13 9.01C6.98 9.16 6.82 9.32 7 9.62C7.18 9.92 7.79 10.9 8.7 11.71C9.87 12.76 10.83 13.09 11.13 13.24C11.43 13.39 11.62 13.36 11.8 13.15C11.98 12.94 12.56 12.27 12.77 11.97C12.98 11.67 13.19 11.72 13.47 11.82C13.75 11.92 15.25 12.66 15.55 12.81C15.85 12.96 16.05 13.03 16.12 13.16C16.19 13.29 16.19 13.84 15.96 14.46L16.46 15.46Z" fill="currentColor"/>
        </svg>
        <span class="title-large font-medium hidden sm:inline">{title}</span>
      </a>
    </div>

    {showSearch && (
      <div class="flex-1 max-w-md mx-4 hidden md:block">
        <div class="relative">
          <div class="absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none">
            <svg class="w-5 h-5 text-surface-on-surface-variant dark:text-surface-dark-on-surface-variant" viewBox="0 0 24 24" fill="currentColor">
              <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
          </div>
          <input
            type="search"
            placeholder="Search sessions..."
            class="w-full pl-12 pr-4 py-3 rounded-3xl bg-surface-container-highest dark:bg-surface-dark-container-highest text-surface-on-surface dark:text-surface-dark-on-surface placeholder-surface-on-surface-variant dark:placeholder-surface-dark-on-surface-variant body-large focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-primary-dark"
          />
        </div>
      </div>
    )}

    <div class="flex items-center gap-2">
      {showThemeToggle && (
        <button
          onclick="toggleTheme()"
          class="p-3 rounded-full hover:bg-surface-container-highest dark:hover:bg-surface-dark-container-highest transition-colors ripple"
          aria-label="Toggle theme"
        >
          <svg class="w-6 h-6 text-surface-on-surface-variant dark:text-surface-dark-on-surface-variant dark:hidden" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/>
          </svg>
          <svg class="w-6 h-6 text-surface-dark-on-surface-variant hidden dark:block" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
          </svg>
        </button>
      )}
      <slot name="actions" />
    </div>
  </div>
</header>
