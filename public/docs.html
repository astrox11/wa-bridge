<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="AstroBridge Documentation - Learn how to use and configure the WhatsApp middleware">
  <title>Documentation - AstroBridge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header__inner">
      <a href="index.html" class="header__logo">AstroBridge</a>
      <nav class="nav">
        <a href="index.html" class="nav__link">Home</a>
        <a href="dashboard.html" class="nav__link">Dashboard</a>
        <a href="docs.html" class="nav__link active">Documentation</a>
        <a href="about.html" class="nav__link">About</a>
      </nav>
    </div>
  </header>

  <!-- Documentation Hero -->
  <section class="hero" style="padding: 3rem 0;">
    <div class="container">
      <h1 class="hero__title" style="font-size: 2.5rem;">Documentation</h1>
      <p class="hero__subtitle">Everything you need to know to get started with AstroBridge</p>
    </div>
  </section>

  <!-- Getting Started -->
  <section class="section">
    <div class="container">
      <h2 class="section__title">Getting Started</h2>
      
      <div class="card">
        <h3 class="card__title">Prerequisites</h3>
        <p class="card__content">Before installing AstroBridge, ensure you have the following:</p>
        <ul style="list-style: disc; margin-left: 2rem; margin-top: 1rem;">
          <li>Bun runtime (v1.0 or higher)</li>
          <li>Node.js 18+ (optional, for npm compatibility)</li>
          <li>A WhatsApp account with an active phone number</li>
        </ul>
      </div>

      <div class="card">
        <h3 class="card__title">Installation</h3>
        <p class="card__content">Clone the repository and install dependencies:</p>
        <pre class="code mt-2">git clone https://github.com/astrox11/astrobridge.git
cd astrobridge
bun install</pre>
      </div>

      <div class="card">
        <h3 class="card__title">Configuration</h3>
        <p class="card__content">Create a <code class="code">.env</code> file in the root directory:</p>
        <pre class="code mt-2">PHONE_NUMBER=+1234567890</pre>
        <p class="card__content mt-2">
          If no configuration is provided, you'll be prompted to enter your phone number at startup.
        </p>
      </div>

      <div class="card">
        <h3 class="card__title">Running the Middleware</h3>
        <pre class="code">bun run start</pre>
        <p class="card__content mt-2">
          The middleware will start and display a pairing code. Enter this code in WhatsApp to authenticate.
        </p>
      </div>
    </div>
  </section>

  <!-- Commands -->
  <section class="section section--alt">
    <div class="container">
      <h2 class="section__title">Built-in Commands</h2>
      
      <div class="table-wrapper">
        <table class="table">
          <thead>
            <tr>
              <th>Command</th>
              <th>Aliases</th>
              <th>Category</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code class="code">.ping</code></td>
              <td><code class="code">.speed</code></td>
              <td>Utility</td>
              <td>Check bot responsiveness and latency</td>
            </tr>
            <tr>
              <td><code class="code">.menu</code></td>
              <td><code class="code">.help</code></td>
              <td>Utility</td>
              <td>Display available commands</td>
            </tr>
            <tr>
              <td><code class="code">.restart</code></td>
              <td><code class="code">.reboot</code></td>
              <td>Utility</td>
              <td>Restart the middleware connection</td>
            </tr>
            <tr>
              <td><code class="code">.shutdown</code></td>
              <td><code class="code">.off</code></td>
              <td>Utility</td>
              <td>Shut down the middleware</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Creating Plugins -->
  <section class="section">
    <div class="container">
      <h2 class="section__title">Creating Plugins</h2>
      
      <div class="card">
        <h3 class="card__title">Plugin Structure</h3>
        <p class="card__content">
          Plugins are TypeScript files in the <code class="code">lib/plugin</code> directory. Each plugin exports a command with the following structure:
        </p>
        <pre class="code mt-2">export const command = {
  pattern: "mycommand",
  alias: ["mc", "mycmd"],
  category: "util",
  desc: "Description of my command",
  async exec(msg, sock) {
    await msg.reply("Hello from my command!");
  }
};</pre>
      </div>

      <div class="card">
        <h3 class="card__title">Command Properties</h3>
        <div class="table-wrapper mt-2">
          <table class="table">
            <thead>
              <tr>
                <th>Property</th>
                <th>Type</th>
                <th>Required</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code class="code">pattern</code></td>
                <td>string</td>
                <td>Yes</td>
                <td>Primary command trigger</td>
              </tr>
              <tr>
                <td><code class="code">alias</code></td>
                <td>string[]</td>
                <td>No</td>
                <td>Alternative triggers</td>
              </tr>
              <tr>
                <td><code class="code">category</code></td>
                <td>string</td>
                <td>Yes</td>
                <td>Command category (p2p, groups, newsletter, status, util)</td>
              </tr>
              <tr>
                <td><code class="code">desc</code></td>
                <td>string</td>
                <td>No</td>
                <td>Command description</td>
              </tr>
              <tr>
                <td><code class="code">exec</code></td>
                <td>function</td>
                <td>Yes</td>
                <td>Async function to execute</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <h3 class="card__title">Message Object</h3>
        <p class="card__content">
          The <code class="code">msg</code> parameter provides access to message data and helper methods:
        </p>
        <pre class="code mt-2">// Access message properties
msg.text      // Message text content
msg.from      // Sender JID
msg.isGroup   // Whether message is from group

// Reply to message
await msg.reply("Your response here");

// Edit a sent message
const sent = await msg.reply("Initial");
await sent.edit("Updated text");</pre>
      </div>
    </div>
  </section>

  <!-- API Reference -->
  <section class="section section--alt">
    <div class="container">
      <h2 class="section__title">API Reference</h2>
      
      <div class="alert alert--info mb-3">
        <strong>Note:</strong> AstroBridge uses the Baileys library for WhatsApp Web API interactions. 
        Refer to the <a href="https://github.com/WhiskeySockets/Baileys">Baileys documentation</a> for advanced usage.
      </div>

      <div class="grid grid--2">
        <div class="card">
          <h4 class="card__title">Message Class</h4>
          <p class="card__content">Wrapper for WhatsApp message objects with helper methods.</p>
          <ul style="list-style: disc; margin-left: 1.5rem; margin-top: 0.5rem;">
            <li><code class="code">reply(text)</code></li>
            <li><code class="code">edit(text)</code></li>
            <li><code class="code">delete()</code></li>
          </ul>
        </div>
        <div class="card">
          <h4 class="card__title">Plugins Class</h4>
          <p class="card__content">Plugin loader and command registry.</p>
          <ul style="list-style: disc; margin-left: 1.5rem; margin-top: 0.5rem;">
            <li><code class="code">load(dir)</code></li>
            <li><code class="code">register(cmd)</code></li>
            <li><code class="code">findAll()</code></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container text-center">
      <p class="footer__text">
        &copy; 2024 AstroBridge. Open source middleware for WhatsApp.
      </p>
      <p class="footer__text mt-2">
        <a href="https://github.com/astrox11/astrobridge">GitHub</a>
      </p>
    </div>
  </footer>
</body>
</html>
